<div class="lesson-plan-container">
  <h1>Create Lesson Plan</h1>

  <div class="form-container">
    <div class="form-group">
      <label for="planName">Lesson Plan Name</label>
      <input
        type="text"
        id="planName"
        [(ngModel)]="planName"
        placeholder="e.g., React Fundamentals Course"
        [disabled]="isLoading"
      />
    </div>

    <div class="form-group">
      <label for="numberOfDays">Number of Lessons</label>
      <input
        type="number"
        id="numberOfDays"
        [(ngModel)]="numberOfDays"
        min="1"
        max="365"
        [disabled]="isLoading"
      />
    </div>

    <div class="form-group">
      <label for="topic">Topic to Learn</label>
      <input
        type="text"
        id="topic"
        [(ngModel)]="topic"
        placeholder="e.g., React, TypeScript, Angular"
        [disabled]="isLoading"
      />
    </div>

    <div class="form-group">
      <label for="description">Description (Optional)</label>
      <textarea
        id="description"
        [(ngModel)]="description"
        placeholder="Provide any additional context or expectations for this lesson plan..."
        rows="4"
        [disabled]="isLoading"
      ></textarea>
    </div>

    <div class="button-group">
      <button
        class="btn btn-primary"
        (click)="generateLessonPlan()"
        [disabled]="isLoading"
      >
        <span *ngIf="!isLoading">Generate Lessons</span>
        <span *ngIf="isLoading">Generating...</span>
      </button>

      <button
        class="btn btn-secondary"
        (click)="resetForm()"
        [disabled]="isLoading"
      >
        Reset
      </button>
    </div>

    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>
  </div>

  <div *ngIf="generatedPlan" class="results-container">
    <div class="results-header">
      <h2>Generated Lesson Plan: {{ generatedPlan.planName }}</h2>
      <div class="action-buttons">
        <button class="btn btn-save" (click)="saveLessonPlan()" [disabled]="isSaving">
          <span *ngIf="!isSaving">Save to Database</span>
          <span *ngIf="isSaving">Saving...</span>
        </button>
        <button class="btn btn-download" (click)="downloadJson()">
          Download JSON
        </button>
      </div>
    </div>

    <div *ngIf="saveSuccess" class="success-message">
      Lesson plan saved successfully!
    </div>

    <div class="lessons-list">
      <div *ngFor="let lesson of generatedPlan.lessons" class="lesson-card">
        <div class="lesson-header">
          <h3>Lesson {{ lesson.lessonNumber }}: {{ lesson.name }}</h3>
          <span class="topic-badge">{{ lesson.topic }}</span>
        </div>
        <p class="lesson-description">{{ lesson.shortDescription }}</p>
      </div>
    </div>
  </div>
</div>
